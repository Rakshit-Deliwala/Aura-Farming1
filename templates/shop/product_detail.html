{% extends "base.html" %}
{% load static %}
{% block extra_css %}
<style>
    /* Breadcrumb */
    .breadcrumb-nav {
        padding: 1rem 0;
        margin-bottom: 0.5rem;
    }
    .breadcrumb-nav a {
        color: #059669;
        text-decoration: none;
        font-size: 0.85rem;
        transition: color 0.3s;
    }
    .breadcrumb-nav a:hover { color: #047857; }
    .breadcrumb-nav span {
        color: #9ca3af;
        font-size: 0.85rem;
        margin: 0 0.4rem;
    }
    .breadcrumb-nav .current {
        color: #6b7280;
        font-size: 0.85rem;
    }

    /* Product Image Section */
    .product-gallery {
        position: sticky;
        top: 100px;
    }
    .product-main-image {
        border-radius: 1.25rem;
        overflow: hidden;
        background: #f9fafb;
        border: 2px solid #f3f4f6;
        position: relative;
        cursor: zoom-in;
    }
    .product-main-image img {
        width: 100%;
        height: 400px;
        object-fit: cover;
        transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .product-main-image:hover img {
        transform: scale(1.08);
    }
    .product-main-image .image-badge {
        position: absolute;
        top: 1rem;
        left: 1rem;
        z-index: 2;
    }
    .product-main-image .image-badge span {
        display: inline-block;
        padding: 0.35rem 0.8rem;
        border-radius: 2rem;
        font-size: 0.75rem;
        font-weight: 600;
        margin-right: 0.4rem;
    }
    .badge-kit { background: #dbeafe; color: #2563eb; }
    .badge-gift { background: #fef3c7; color: #d97706; }
    .badge-stock-low { background: #fee2e2; color: #dc2626; }
    .placeholder-image-large {
        width: 100%;
        height: 400px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #f0fdf4, #ecfdf5);
        border-radius: 1.25rem;
        font-size: 1.5rem;
        color: #059669;
        font-weight: 700;
        letter-spacing: 2px;
    }

    /* Product Info */
    .product-info { padding-left: 1.5rem; }
    .product-category-tag {
        display: inline-block;
        padding: 0.3rem 1rem;
        background: linear-gradient(135deg, #ecfdf5, #d1fae5);
        color: #059669;
        border-radius: 2rem;
        font-size: 0.8rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 0.75rem;
    }
    .product-title {
        font-family: 'Playfair Display', serif;
        font-size: 2rem;
        font-weight: 700;
        color: #111827;
        margin-bottom: 0.75rem;
        line-height: 1.2;
    }
    .product-price-section {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1.25rem;
    }
    .product-price {
        font-size: 2rem;
        font-weight: 800;
        color: #059669;
    }
    .product-price-note {
        font-size: 0.8rem;
        color: #6b7280;
        background: #f3f4f6;
        padding: 0.25rem 0.6rem;
        border-radius: 0.5rem;
    }
    .product-meta-strip {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        margin-bottom: 1.5rem;
    }
    .product-meta-strip .meta-item {
        display: flex;
        align-items: center;
        gap: 0.4rem;
        font-size: 0.82rem;
        color: #6b7280;
        background: #f9fafb;
        padding: 0.4rem 0.8rem;
        border-radius: 0.5rem;
        border: 1px solid #f3f4f6;
    }
    .product-meta-strip .meta-item i { color: #059669; }
    
    /* Stock Indicator */
    .stock-indicator {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.6rem 1rem;
        border-radius: 0.75rem;
        margin-bottom: 1.25rem;
        font-size: 0.85rem;
        font-weight: 500;
    }
    .stock-in { background: #ecfdf5; color: #059669; border: 1px solid #a7f3d0; }
    .stock-low { background: #fef3c7; color: #d97706; border: 1px solid #fde68a; }
    .stock-out { background: #fee2e2; color: #dc2626; border: 1px solid #fecaca; }
    .stock-dot {
        width: 8px; height: 8px;
        border-radius: 50%;
        display: inline-block;
    }
    .stock-in .stock-dot { background: #059669; animation: pulse-dot 2s infinite; }
    .stock-low .stock-dot { background: #d97706; animation: pulse-dot 1.5s infinite; }
    .stock-out .stock-dot { background: #dc2626; }
    @keyframes pulse-dot {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.4; }
    }

    /* Description */
    .product-description {
        color: #4b5563;
        line-height: 1.7;
        font-size: 0.95rem;
        margin-bottom: 1.5rem;
        padding-bottom: 1.5rem;
        border-bottom: 1px solid #f3f4f6;
    }

    /* Tags */
    .product-tags { margin-bottom: 1.5rem; }
    .product-tags .tag-label {
        font-size: 0.8rem;
        font-weight: 600;
        color: #374151;
        margin-bottom: 0.5rem;
    }
    .product-tags .tags-list {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    .product-tags .tag-item {
        padding: 0.3rem 0.75rem;
        background: #f3f4f6;
        color: #4b5563;
        border-radius: 2rem;
        font-size: 0.78rem;
        transition: all 0.3s;
    }
    .product-tags .tag-item:hover {
        background: #059669;
        color: white;
    }

    /* Action Buttons */
    .product-actions {
        display: flex;
        gap: 1rem;
        margin-bottom: 1.5rem;
    }
    .btn-add-cart {
        flex: 1;
        padding: 0.85rem 1.5rem;
        background: linear-gradient(135deg, #059669, #047857);
        color: white;
        border: none;
        border-radius: 0.75rem;
        font-size: 1rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        transition: all 0.3s ease;
        text-decoration: none;
        position: relative;
        overflow: hidden;
    }
    .btn-add-cart::before {
        content: '';
        position: absolute;
        top: 0; left: -100%; width: 100%; height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.5s;
    }
    .btn-add-cart:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 30px rgba(5,150,105,0.3);
        color: white;
    }
    .btn-add-cart:hover::before { left: 100%; }
    .btn-buy-now {
        padding: 0.85rem 1.5rem;
        background: white;
        color: #059669;
        border: 2px solid #059669;
        border-radius: 0.75rem;
        font-size: 1rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        transition: all 0.3s ease;
        text-decoration: none;
    }
    .btn-buy-now:hover {
        background: #059669;
        color: white;
        transform: translateY(-3px);
        box-shadow: 0 10px 30px rgba(5,150,105,0.2);
    }

    /* Info Cards */
    .info-cards {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.75rem;
    }
    .info-card {
        padding: 1rem;
        border-radius: 0.75rem;
        background: #f9fafb;
        border: 1px solid #f3f4f6;
        transition: all 0.3s;
    }
    .info-card:hover {
        background: white;
        box-shadow: 0 4px 12px rgba(0,0,0,0.06);
        transform: translateY(-2px);
    }
    .info-card i {
        font-size: 1.25rem;
        color: #059669;
        margin-bottom: 0.4rem;
        display: block;
    }
    .info-card strong {
        font-size: 0.8rem;
        color: #374151;
        display: block;
        margin-bottom: 0.2rem;
    }
    .info-card p {
        font-size: 0.75rem;
        color: #6b7280;
        margin: 0;
        line-height: 1.4;
    }
    @media (max-width: 768px) {
        .product-info { padding-left: 0; margin-top: 1.5rem; }
        .product-title { font-size: 1.5rem; }
        .product-price { font-size: 1.6rem; }
        .product-main-image img { height: 300px; }
        .product-actions { flex-direction: column; }
        .info-cards { grid-template-columns: 1fr 1fr; }
    }
</style>
{% endblock %}
{% block content %}
<!-- Breadcrumb -->
<nav class="breadcrumb-nav">
    <a href="{% url 'shop:home' %}"><i class="bi bi-house"></i> Home</a>
    <span>/</span>
    <a href="{% url 'shop:product_list' %}">Shop</a>
    <span>/</span>
    <span class="current">{{ product.name }}</span>
</nav>

<div class="row">
    <!-- Product Image -->
    <div class="col-md-5 mb-4">
        <div class="product-gallery">
            <div class="product-main-image">
                {% if product.is_kit or product.is_gift or product.stock <= 5 and product.stock > 0 %}
                <div class="image-badge">
                    {% if product.is_kit %}<span class="badge-kit">üß∞ Kit</span>{% endif %}
                    {% if product.is_gift %}<span class="badge-gift">üéÅ Gift</span>{% endif %}
                    {% if product.stock <= 5 and product.stock > 0 %}<span class="badge-stock-low">üî• Few Left</span>{% endif %}
                </div>
                {% endif %}
                {% if product.image_url %}
                    <img src="{{ product.image_url }}" alt="{{ product.name }}">
                {% elif product.image %}
                    <img src="{{ product.image.url }}" alt="{{ product.name }}">
                {% else %}
                    <div class="placeholder-image-large">
                        <span>üåø AURA FARMING</span>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Product Info -->
    <div class="col-md-7 mb-4">
        <div class="product-info">
            <span class="product-category-tag">
                {% if product.category_type == 'tools' %}üîß Tools
                {% elif product.category_type == 'kits' %}üß∞ Kits
                {% elif product.category_type == 'soil' %}üå± Soil & Media
                {% else %}üéÅ Gifts
                {% endif %}
            </span>
            
            <h1 class="product-title">{{ product.name }}</h1>
            
            <div class="product-price-section">
                <span class="product-price">‚Çπ{{ product.price_inr }}</span>
                <span class="product-price-note">Inclusive of all taxes</span>
            </div>
            
            <div class="product-meta-strip">
                {% if product.is_kit %}
                <div class="meta-item"><i class="bi bi-box-seam"></i> Complete Kit</div>
                {% endif %}
                {% if product.is_gift %}
                <div class="meta-item"><i class="bi bi-gift"></i> Gift Ready</div>
                {% endif %}
                <div class="meta-item"><i class="bi bi-truck"></i> Free Shipping</div>
                <div class="meta-item"><i class="bi bi-cash-coin"></i> COD Available</div>
                <div class="meta-item"><i class="bi bi-geo-alt"></i> Pan-India Delivery</div>
            </div>
            
            <!-- Stock Indicator -->
            {% if product.stock > 5 %}
            <div class="stock-indicator stock-in">
                <span class="stock-dot"></span> In Stock ‚Äî Ready to ship
            </div>
            {% elif product.stock > 0 %}
            <div class="stock-indicator stock-low">
                <span class="stock-dot"></span> Only {{ product.stock }} left ‚Äî Order soon!
            </div>
            {% else %}
            <div class="stock-indicator stock-out">
                <span class="stock-dot"></span> Currently out of stock
            </div>
            {% endif %}
            
            <!-- Description -->
            <div class="product-description">
                {{ product.description }}
            </div>
            
            <!-- Tags -->
            {% if product.tags %}
            <div class="product-tags">
                <div class="tag-label">Tags</div>
                <div class="tags-list">
                    {% for tag in product.tags_list %}
                    <span class="tag-item">{{ tag }}</span>
                    {% empty %}
                    <span class="tag-item">{{ product.tags }}</span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
            <!-- Action Buttons -->
            <div class="product-actions">
                {% if product.stock > 0 %}
                <a href="{% url 'shop:add_to_cart' product.id %}" class="btn-add-cart">
                    <i class="bi bi-cart-plus"></i> Add to Cart
                </a>
                <a href="{% url 'shop:checkout' %}" class="btn-buy-now">
                    <i class="bi bi-lightning"></i> Buy Now
                </a>
                {% else %}
                <button class="btn-add-cart" disabled style="opacity: 0.5; cursor: not-allowed; background: #9ca3af;">
                    <i class="bi bi-x-circle"></i> Out of Stock
                </button>
                {% endif %}
            </div>
            
            <!-- Info Cards -->
            <div class="info-cards">
                <div class="info-card">
                    <i class="bi bi-bullseye"></i>
                    <strong>Ideal For</strong>
                    <p>
                        {% if product.category_type == 'tools' %}Balcony gardeners, terrace farmers &amp; home gardeners
                        {% elif product.category_type == 'kits' %}Beginners wanting a ready-to-grow solution
                        {% elif product.category_type == 'soil' %}Chemical-free potting for veggies &amp; indoor plants
                        {% else %}Sustainable gifting for friends &amp; family
                        {% endif %}
                    </p>
                </div>
                <div class="info-card">
                    <i class="bi bi-truck"></i>
                    <strong>Dispatch</strong>
                    <p>Ships in 24‚Äì48 hours from Bengaluru. Delivery: 3‚Äì7 days across India.</p>
                </div>
                <div class="info-card">
                    <i class="bi bi-shield-check"></i>
                    <strong>Quality Assured</strong>
                    <p>Premium quality products tested for Indian gardening conditions.</p>
                </div>
                <div class="info-card">
                    <i class="bi bi-arrow-counterclockwise"></i>
                    <strong>Easy Returns</strong>
                    <p>7-day hassle-free return policy on all products.</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
